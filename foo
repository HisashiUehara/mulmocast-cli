yarn run v1.22.22
$ NODE_ENV=test tsx --test ./test/*/test_*.ts
TAP version 13
# movieParams: 0 {} undefined 
#  undefined undefined
# movieParams: 1 {} undefined 
#  Generate a movie of this scene undefined
# movieParams: 2 {} undefined 
#  Generate a movie of this scene undefined
# movieParams: 7 {} undefined 
#  undefined undefined
# movieParams: 8 {} undefined 
#  undefined undefined
# movieParams: 9 {} undefined 
#  undefined undefined
# movieParams: 10 {} undefined 
#  undefined undefined
# movieParams: 12 {} undefined 
#  undefined undefined
# movieParams: 1 {} undefined 
#  undefined undefined
# movieParams: 13 {} undefined 
#  undefined undefined
# movieParams: 14 {} undefined 
#  undefined undefined
# movieParams: 15 {} undefined 
#  Only movie prompt undefined
# movieParams: 16 {} undefined 
#  Movie prompt undefined
# movieParams: 17 {} undefined 
#  Movie prompt undefined
# movieParams: 18 {} undefined 
#  Movie prompt undefined
# movieParams: 19 {} undefined 
#  undefined undefined
# movieParams: 20 {} undefined 
#  undefined undefined
# movieParams: 21 {} undefined 
#  undefined undefined
# movieParams: 22 {} undefined 
#  undefined Birds chirping in the background
# movieParams: 23 {} undefined 
#  undefined Birds chirping and wind blowing
# movieParams: 24 {} {
#   agentName: 'soundEffectReplicateAgent',
#   defaultModel: 'zsxkib/mmaudio',
#   models: [ 'zsxkib/mmaudio' ],
#   modelParams: {
#     'zsxkib/mmaudio': {
#       identifier: 'zsxkib/mmaudio:62871fb59889b2d7c13777f08deb3b36bdff88f7e1d53a50ad7694548a41b484'
#     }
#   }
# } 
#  A forest scene with movement Birds chirping and leaves rustling
# movieParams: 25 {} {
#   agentName: 'soundEffectReplicateAgent',
#   defaultModel: 'zsxkib/mmaudio',
#   models: [ 'zsxkib/mmaudio' ],
#   modelParams: {
#     'zsxkib/mmaudio': {
#       identifier: 'zsxkib/mmaudio:62871fb59889b2d7c13777f08deb3b36bdff88f7e1d53a50ad7694548a41b484'
#     }
#   }
# } 
#  Trees swaying gently Nature sounds with gentle breeze
# movieParams: 26 {} undefined 
#  undefined undefined
# movieParams: 27 {} undefined 
#  undefined undefined
# movieParams: 28 {} undefined 
#  Person speaking with lip movement undefined
# movieParams: 29 {} undefined 
#  Subtle lip movements while speaking undefined
# movieParams: 30 {} undefined 
#  undefined Background music
# movieParams: 31 {} undefined 
#  undefined Applause and background music
# movieParams: 32 {} {
#   agentName: 'soundEffectReplicateAgent',
#   defaultModel: 'zsxkib/mmaudio',
#   models: [ 'zsxkib/mmaudio' ],
#   modelParams: {
#     'zsxkib/mmaudio': {
#       identifier: 'zsxkib/mmaudio:62871fb59889b2d7c13777f08deb3b36bdff88f7e1d53a50ad7694548a41b484'
#     }
#   }
# } 
#  Performance with synchronized audio and lip movement Live concert atmosphere
# movieParams: 33 {} {
#   agentName: 'soundEffectReplicateAgent',
#   defaultModel: 'zsxkib/mmaudio',
#   models: [ 'zsxkib/mmaudio' ],
#   modelParams: {
#     'zsxkib/mmaudio': {
#       identifier: 'zsxkib/mmaudio:62871fb59889b2d7c13777f08deb3b36bdff88f7e1d53a50ad7694548a41b484'
#     }
#   }
# } 
#  Speaker gesturing while presenting Ambient conference room sound
# Subtest: imagePreprocessAgent - basic functionality
ok 1 - imagePreprocessAgent - basic functionality
  ---
  duration_ms: 2.143541
  ...
# Subtest: imagePreprocessAgent - with movie prompt and text
ok 2 - imagePreprocessAgent - with movie prompt and text
  ---
  duration_ms: 0.276291
  ...
# Subtest: imagePreprocessAgent - movie prompt only (no image prompt)
ok 3 - imagePreprocessAgent - movie prompt only (no image prompt)
  ---
  duration_ms: 2.117125
  ...
# Subtest: imagePreprocessAgent - with image plugin (textSlide)
ok 4 - imagePreprocessAgent - with image plugin (textSlide) # SKIP
  ---
  duration_ms: 0.118667
  ...
# Subtest: imagePreprocessAgent - with image plugin (markdown)
ok 5 - imagePreprocessAgent - with image plugin (markdown) # SKIP
  ---
  duration_ms: 0.0375
  ...
# Subtest: imagePreprocessAgent - with image plugin (chart)
ok 6 - imagePreprocessAgent - with image plugin (chart) # SKIP
  ---
  duration_ms: 0.025458
  ...
# Subtest: imagePreprocessAgent - with image plugin (mermaid)
ok 7 - imagePreprocessAgent - with image plugin (mermaid) # SKIP
  ---
  duration_ms: 0.091459
  ...
# Subtest: imagePreprocessAgent - with imageNames
ok 8 - imagePreprocessAgent - with imageNames
  ---
  duration_ms: 0.18225
  ...
# Subtest: imagePreprocessAgent - without imageNames (uses all imageRefs)
ok 9 - imagePreprocessAgent - without imageNames (uses all imageRefs)
  ---
  duration_ms: 0.42575
  ...
# Subtest: imagePreprocessAgent - filters undefined image references
ok 10 - imagePreprocessAgent - filters undefined image references
  ---
  duration_ms: 0.351
  ...
# Subtest: imagePreprocessAgent - merges beat and imageAgentInfo imageParams
ok 11 - imagePreprocessAgent - merges beat and imageAgentInfo imageParams
  ---
  duration_ms: 0.158583
  ...
# Subtest: imagePreprocessAgent - empty imageRefs
ok 12 - imagePreprocessAgent - empty imageRefs
  ---
  duration_ms: 0.087583
  ...
# Subtest: imagePreprocessAgent - with real sample data
ok 13 - imagePreprocessAgent - with real sample data
  ---
  duration_ms: 0.562042
  ...
# Subtest: imagePreprocessAgent - text only
ok 14 - imagePreprocessAgent - text only
  ---
  duration_ms: 0.119375
  ...
# Subtest: imagePreprocessAgent - imagePrompt only
ok 15 - imagePreprocessAgent - imagePrompt only
  ---
  duration_ms: 0.086125
  ...
# Subtest: imagePreprocessAgent - moviePrompt only
ok 16 - imagePreprocessAgent - moviePrompt only
  ---
  duration_ms: 0.0735
  ...
# Subtest: imagePreprocessAgent - text + moviePrompt (no imagePrompt)
ok 17 - imagePreprocessAgent - text + moviePrompt (no imagePrompt)
  ---
  duration_ms: 0.057458
  ...
# Subtest: imagePreprocessAgent - imagePrompt + moviePrompt (no text)
ok 18 - imagePreprocessAgent - imagePrompt + moviePrompt (no text)
  ---
  duration_ms: 0.069958
  ...
# Subtest: imagePreprocessAgent - text + imagePrompt + moviePrompt (all three)
ok 19 - imagePreprocessAgent - text + imagePrompt + moviePrompt (all three)
  ---
  duration_ms: 0.058125
  ...
# Subtest: imagePreprocessAgent - no text, no imagePrompt, no moviePrompt
ok 20 - imagePreprocessAgent - no text, no imagePrompt, no moviePrompt
  ---
  duration_ms: 0.058166
  ...
# Subtest: imagePreprocessAgent - with both text and imagePrompt
ok 21 - imagePreprocessAgent - with both text and imagePrompt
  ---
  duration_ms: 0.057833
  ...
# Subtest: imagePreprocessAgent - with imageParams override
ok 22 - imagePreprocessAgent - with imageParams override
  ---
  duration_ms: 0.075084
  ...
# Subtest: imagePreprocessAgent - with soundEffectPrompt only
ok 23 - imagePreprocessAgent - with soundEffectPrompt only
  ---
  duration_ms: 0.062375
  ...
# Subtest: imagePreprocessAgent - soundEffectPrompt + imagePrompt
ok 24 - imagePreprocessAgent - soundEffectPrompt + imagePrompt
  ---
  duration_ms: 0.059417
  ...
# Subtest: imagePreprocessAgent - soundEffectPrompt + moviePrompt (no imagePrompt)
ok 25 - imagePreprocessAgent - soundEffectPrompt + moviePrompt (no imagePrompt)
  ---
  duration_ms: 0.440833
  ...
# Subtest: imagePreprocessAgent - soundEffectPrompt + imagePrompt + moviePrompt
ok 26 - imagePreprocessAgent - soundEffectPrompt + imagePrompt + moviePrompt
  ---
  duration_ms: 0.194416
  ...
# Subtest: imagePreprocessAgent - with enableLipSync true
ok 27 - imagePreprocessAgent - with enableLipSync true
  ---
  duration_ms: 0.065375
  ...
# Subtest: imagePreprocessAgent - enableLipSync + imagePrompt
ok 28 - imagePreprocessAgent - enableLipSync + imagePrompt
  ---
  duration_ms: 0.061875
  ...
# Subtest: imagePreprocessAgent - enableLipSync + moviePrompt (no imagePrompt)
ok 29 - imagePreprocessAgent - enableLipSync + moviePrompt (no imagePrompt)
  ---
  duration_ms: 0.093375
  ...
# Subtest: imagePreprocessAgent - enableLipSync + imagePrompt + moviePrompt
ok 30 - imagePreprocessAgent - enableLipSync + imagePrompt + moviePrompt
  ---
  duration_ms: 0.084625
  ...
# Subtest: imagePreprocessAgent - soundEffectPrompt + enableLipSync
ok 31 - imagePreprocessAgent - soundEffectPrompt + enableLipSync
  ---
  duration_ms: 0.059875
  ...
# Subtest: imagePreprocessAgent - soundEffectPrompt + enableLipSync + imagePrompt
ok 32 - imagePreprocessAgent - soundEffectPrompt + enableLipSync + imagePrompt
  ---
  duration_ms: 0.057917
  ...
# Subtest: imagePreprocessAgent - soundEffectPrompt + enableLipSync + moviePrompt (no imagePrompt)
ok 33 - imagePreprocessAgent - soundEffectPrompt + enableLipSync + moviePrompt (no imagePrompt)
  ---
  duration_ms: 0.108708
  ...
# Subtest: imagePreprocessAgent - all parameters: soundEffectPrompt + enableLipSync + imagePrompt + moviePrompt + text
ok 34 - imagePreprocessAgent - all parameters: soundEffectPrompt + enableLipSync + imagePrompt + moviePrompt + text
  ---
  duration_ms: 0.180667
  ...
# [dotenv@17.2.1] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
# < image
# { kind: 'session', sessionType: 'image', inSession: true }
# text2image: provider=openai model=undefined
# { image 0
# { kind: 'beat', sessionType: 'image', index: 0, inSession: true }
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# { image 1
# { kind: 'beat', sessionType: 'image', index: 1, inSession: true }
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# { image 2
# { kind: 'beat', sessionType: 'image', index: 2, inSession: true }
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# prop: htmlPrompt is not hit
# { image 3
# { kind: 'beat', sessionType: 'image', index: 3, inSession: true }
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# { image 4
# { kind: 'beat', sessionType: 'image', index: 4, inSession: true }
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
#  } image 4
# { kind: 'beat', sessionType: 'image', index: 4, inSession: false }
# prop: enableLipSync is not hit
#  } image 0
# { kind: 'beat', sessionType: 'image', index: 0, inSession: false }
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
#  } image 1
# { kind: 'beat', sessionType: 'image', index: 1, inSession: false }
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
#  } image 3
# { kind: 'beat', sessionType: 'image', index: 3, inSession: false }
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
#  } image 2
# { kind: 'beat', sessionType: 'image', index: 2, inSession: false }
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
#  > image
# { kind: 'session', sessionType: 'image', inSession: false }
# text2image: provider=openai model=undefined
# { image 1
# { kind: 'beat', sessionType: 'image', index: 1, inSession: true }
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# Subtest: test images
ok 35 - test images
  ---
  duration_ms: 2545.4855
  ...
#  } image 1
# { kind: 'beat', sessionType: 'image', index: 1, inSession: false }
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# Subtest: test beat images
ok 36 - test beat images
  ---
  duration_ms: 730.65225
  ...
# [dotenv@17.2.1] injecting env (0) from .env -- tip: üì° auto-backup env with Radar: https://dotenvx.com/radar
# < audio
# filterComplex: [0:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a0]
# [a0]asplit=4[ls_0][ls_1][ls_2][ls_3]
# [1:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a1]
# [ls_3]atrim=start=0:end=0.3[padding_0]
# [2:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a2]
# [ls_2]atrim=start=0:end=0.3[padding_1]
# [3:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a3]
# [ls_1]atrim=start=0:end=0.3[padding_2]
# [4:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a4]
# [ls_0]atrim=start=0:end=0.8[padding_3]
# [5:a]aformat=sample_fmts=fltp:sample_rates=44100:channel_layouts=stereo[a5]
# Started FFmpeg ...
# totalDucation: 8.672653 10.672653
# Started FFmpeg ...
# prop: reference is not hit
# writing: /Users/satoshi/git/ai/mulmo/output/audio/hello/hello.mp3
#  > audio
# writing: /Users/satoshi/git/ai/mulmo/output/hello.mp3
# < image
# text2image: provider=openai model=undefined
# { image 0
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# { image 1
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# { image 2
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# { image 3
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
# { image 4
# prop: htmlPrompt is not hit
# prop: htmlPrompt is not hit
# prop: html.codeBlockOrRaw() is not hit
# prop: codeBlockOrRaw() is not hit
# prop: htmlPrompt is not hit
# prop: prompt is not hit
#  } image 4
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
#  } image 0
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
#  } image 1
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
#  } image 2
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
#  } image 3
# prop: movieFile is not hit
# prop: imageFromMovie is not hit
# prop: soundEffectPrompt is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: enableLipSync is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
# prop: movieFile is not hit
# prop: soundEffectFile is not hit
# prop: lipSyncFile is not hit
#  > image
# < video
# filterComplex: [0:v]loop=loop=-1:size=1:start=0,trim=duration=2.956,fps=30,setpts=PTS-STARTPTS,scale=w=1280:h=720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2:color=black,setsar=1,format=yuv420p[v0]
# [1:v]loop=loop=-1:size=1:start=0,trim=duration=1.956,fps=30,setpts=PTS-STARTPTS,scale=w=1280:h=720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2:color=black,setsar=1,format=yuv420p[v1]
# [2:v]loop=loop=-1:size=1:start=0,trim=duration=1.956,fps=30,setpts=PTS-STARTPTS,scale=w=1280:h=720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2:color=black,setsar=1,format=yuv420p[v2]
# [3:v]loop=loop=-1:size=1:start=0,trim=duration=2.456,fps=30,setpts=PTS-STARTPTS,scale=w=1280:h=720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2:color=black,setsar=1,format=yuv420p[v3]
# [4:v]loop=loop=-1:size=1:start=0,trim=duration=1.3395920000000001,fps=30,setpts=PTS-STARTPTS,scale=w=1280:h=720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2:color=black,setsar=1,format=yuv420p[v4]
# [v0][v1][v2][v3][v4]concat=n=5:v=1:a=0[concat_video]
# Started FFmpeg ...
# Video created successfully! 2.241 sec
# MASAI: A Modular Future for Software Engineering AI
# writing: /Users/satoshi/git/ai/mulmo/output/hello.mp4
#  > video
# Subtest: test images and movie
ok 37 - test images and movie
  ---
  duration_ms: 6706.220416
  ...
# Subtest: validateSchemaAgent with valid MulmoScript
ok 38 - validateSchemaAgent with valid MulmoScript
  ---
  duration_ms: 2.324458
  ...
# Subtest: validateSchemaAgent with invalid MulmoScript
ok 39 - validateSchemaAgent with invalid MulmoScript
  ---
  duration_ms: 0.208083
  ...
# Subtest: defaultSpeaker isDefault
ok 40 - defaultSpeaker isDefault
  ---
  duration_ms: 0.389083
  ...
# Subtest: defaultSpeaker no isDefault
ok 41 - defaultSpeaker no isDefault
  ---
  duration_ms: 0.058959
  ...
# Subtest: defaultSpeaker no isDefault two speaker
ok 42 - defaultSpeaker no isDefault two speaker
  ---
  duration_ms: 0.054833
  ...
# Subtest: defaultSpeaker isDefault two speaker
ok 43 - defaultSpeaker isDefault two speaker
  ---
  duration_ms: 0.046
  ...
# Subtest: defaultSpeaker error no speaker
ok 44 - defaultSpeaker error no speaker
  ---
  duration_ms: 0.136416
  ...
# Subtest: test getFileObject
ok 45 - test getFileObject
  ---
  duration_ms: 0.785167
  ...
# Subtest: test createOrUpdateStudioData
ok 46 - test createOrUpdateStudioData
  ---
  duration_ms: 2.567792
  ...
# Subtest: test createOrUpdateStudioData
ok 47 - test createOrUpdateStudioData
  ---
  duration_ms: 0.612833
  ...
# Subtest: test getBaseDirPath pwd
ok 48 - test getBaseDirPath pwd
  ---
  duration_ms: 0.631
  ...
# Subtest: test getBaseDirPath absolute
ok 49 - test getBaseDirPath absolute
  ---
  duration_ms: 0.056292
  ...
# Subtest: test getBaseDirPath related
ok 50 - test getBaseDirPath related
  ---
  duration_ms: 0.049541
  ...
# Subtest: test getFullPath 1
ok 51 - test getFullPath 1
  ---
  duration_ms: 0.055875
  ...
# Subtest: test getFullPath 2
ok 52 - test getFullPath 2
  ---
  duration_ms: 0.105583
  ...
# Subtest: test getFullPath 3
ok 53 - test getFullPath 3
  ---
  duration_ms: 0.038708
  ...
# Subtest: test getFullPath 4
ok 54 - test getFullPath 4
  ---
  duration_ms: 0.083042
  ...
# Subtest: test getFullPath 5
ok 55 - test getFullPath 5
  ---
  duration_ms: 0.044333
  ...
# Subtest: test getFullPath 6
ok 56 - test getFullPath 6
  ---
  duration_ms: 0.204917
  ...
# Subtest: test imagePlugin mermaid
ok 57 - test imagePlugin mermaid
  ---
  duration_ms: 0.398709
  ...
# Subtest: test imagePlugin image
ok 58 - test imagePlugin image
  ---
  duration_ms: 0.084875
  ...
# Subtest: test imagePlugin beat
ok 59 - test imagePlugin beat
  ---
  duration_ms: 0.067708
  ...
# Subtest: test getVideoParts image
ok 60 - test getVideoParts image
  ---
  duration_ms: 0.425958
  ...
# Subtest: test getVideoParts movie
ok 61 - test getVideoParts movie
  ---
  duration_ms: 0.059333
  ...
# Subtest: test getAudioPart movie
ok 62 - test getAudioPart movie
  ---
  duration_ms: 0.060416
  ...
# Subtest: test/utils/test_mulmo_data.ts
ok 10 - test/utils/test_mulmo_data.ts
  ---
  duration_ms: 203.942875
  ...
# Subtest: test imagePrompt
ok 64 - test imagePrompt
  ---
  duration_ms: 0.514667
  ...
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/samples/graphai_intro.json
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/slides/test_markdown.json
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/slides/test_slide.json
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/slides/test_slide2.json
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/slides/test_slide_img.json
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/slides/test_slide_img2.json
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/slides/test_whales.json
# *** UPDATE REQUIRED *** /Users/satoshi/git/ai/mulmo/scripts/stories/momotaro.json
# Subtest: JSON files in scripts directory should conform to mulmoScriptSchema
    # Subtest: Validating errors/error_audio.json
    ok 1 - Validating errors/error_audio.json
      ---
      duration_ms: 1.824292
      ...
    # Subtest: Validating errors/error_image.json
    ok 2 - Validating errors/error_image.json
      ---
      duration_ms: 0.284542
      ...
    # Subtest: Validating samples/ai2027.json
    ok 3 - Validating samples/ai2027.json
      ---
      duration_ms: 1.766
      ...
    # Subtest: Validating samples/attention.json
    ok 4 - Validating samples/attention.json
      ---
      duration_ms: 1.792083
      ...
    # Subtest: Validating samples/economics_genai.json
    ok 5 - Validating samples/economics_genai.json
      ---
      duration_ms: 0.431209
      ...
    # Subtest: Validating samples/google_dilemma.json
    ok 6 - Validating samples/google_dilemma.json
      ---
      duration_ms: 0.656458
      ...
    # Subtest: Validating samples/graphai_intro.json
    ok 7 - Validating samples/graphai_intro.json
      ---
      duration_ms: 0.643125
      ...
    # Subtest: Validating samples/infinit_game.json
    ok 8 - Validating samples/infinit_game.json
      ---
      duration_ms: 0.750791
      ...
    # Subtest: Validating samples/llama_funding.json
    ok 9 - Validating samples/llama_funding.json
      ---
      duration_ms: 0.60625
      ...
    # Subtest: Validating samples/tesla_drone.json
    ok 10 - Validating samples/tesla_drone.json
      ---
      duration_ms: 0.502125
      ...
    # Subtest: Validating samples/test_cash_vs_mergin.json
    ok 11 - Validating samples/test_cash_vs_mergin.json
      ---
      duration_ms: 0.558417
      ...
    # Subtest: Validating slides/test_markdown.json
    ok 12 - Validating slides/test_markdown.json
      ---
      duration_ms: 0.367958
      ...
    # Subtest: Validating slides/test_slide.json
    ok 13 - Validating slides/test_slide.json
      ---
      duration_ms: 1.653166
      ...
    # Subtest: Validating slides/test_slide2.json
    ok 14 - Validating slides/test_slide2.json
      ---
      duration_ms: 1.20975
      ...
    # Subtest: Validating slides/test_slide_img.json
    ok 15 - Validating slides/test_slide_img.json
      ---
      duration_ms: 0.267542
      ...
    # Subtest: Validating slides/test_slide_img2.json
    ok 16 - Validating slides/test_slide_img2.json
      ---
      duration_ms: 0.866583
      ...
    # Subtest: Validating slides/test_whales.json
    ok 17 - Validating slides/test_whales.json
      ---
      duration_ms: 1.182709
      ...
    # Subtest: Validating snakajima/digital_democracy.json
    ok 18 - Validating snakajima/digital_democracy.json
      ---
      duration_ms: 0.386667
      ...
    # Subtest: Validating snakajima/fsd_demo.json
    ok 19 - Validating snakajima/fsd_demo.json
      ---
      duration_ms: 1.13375
      ...
    # Subtest: Validating snakajima/girl_and_cat.json
    ok 20 - Validating snakajima/girl_and_cat.json
      ---
      duration_ms: 0.239333
      ...
    # Subtest: Validating snakajima/love_is_vibe_coding.json
    ok 21 - Validating snakajima/love_is_vibe_coding.json
      ---
      duration_ms: 0.443959
      ...
    # Subtest: Validating snakajima/math_mystery.json
    ok 22 - Validating snakajima/math_mystery.json
      ---
      duration_ms: 0.284292
      ...
    # Subtest: Validating snakajima/olympics.json
    ok 23 - Validating snakajima/olympics.json
      ---
      duration_ms: 0.35525
      ...
    # Subtest: Validating snakajima/peter_lynch.json
    ok 24 - Validating snakajima/peter_lynch.json
      ---
      duration_ms: 0.318291
      ...
    # Subtest: Validating snakajima/replicate_movie_sample.json
    ok 25 - Validating snakajima/replicate_movie_sample.json
      ---
      duration_ms: 0.145834
      ...
    # Subtest: Validating snakajima/rl_html.json
    ok 26 - Validating snakajima/rl_html.json
      ---
      duration_ms: 0.267417
      ...
    # Subtest: Validating snakajima/rl_image.json
    ok 27 - Validating snakajima/rl_image.json
      ---
      duration_ms: 0.263958
      ...
    # Subtest: Validating snakajima/spacex_shorts.json
    ok 28 - Validating snakajima/spacex_shorts.json
      ---
      duration_ms: 0.285208
      ...
    # Subtest: Validating snakajima/veo3_sample.json
    ok 29 - Validating snakajima/veo3_sample.json
      ---
      duration_ms: 0.322834
      ...
    # Subtest: Validating snakajima/vibe_coding.json
    ok 30 - Validating snakajima/vibe_coding.json
      ---
      duration_ms: 0.522667
      ...
    # Subtest: Validating stories/momotaro.json
    ok 31 - Validating stories/momotaro.json
      ---
      duration_ms: 0.401125
      ...
    # Subtest: Validating templates/business.json
    ok 32 - Validating templates/business.json
      ---
      duration_ms: 0.935209
      ...
    # Subtest: Validating templates/children_book.json
    ok 33 - Validating templates/children_book.json
      ---
      duration_ms: 0.332458
      ...
    # Subtest: Validating templates/coding.json
    ok 34 - Validating templates/coding.json
      ---
      duration_ms: 0.597708
      ...
    # Subtest: Validating templates/html.json
    ok 35 - Validating templates/html.json
      ---
      duration_ms: 0.1585
      ...
    # Subtest: Validating templates/image_refs.json
    ok 36 - Validating templates/image_refs.json
      ---
      duration_ms: 0.145583
      ...
    # Subtest: Validating templates/presentation.json
    ok 37 - Validating templates/presentation.json
      ---
      duration_ms: 0.210417
      ...
    # Subtest: Validating templates/sensei_and_taro.json
    ok 38 - Validating templates/sensei_and_taro.json
      ---
      duration_ms: 0.746708
      ...
    # Subtest: Validating templates/voice_over.json
    ok 39 - Validating templates/voice_over.json
      ---
      duration_ms: 0.721333
      ...
    # Subtest: Validating test/gpt.json
    ok 40 - Validating test/gpt.json
      ---
      duration_ms: 0.107833
      ...
    # Subtest: Validating test/test.json
    ok 41 - Validating test/test.json
      ---
      duration_ms: 0.130375
      ...
    # Subtest: Validating test/test1.json
    ok 42 - Validating test/test1.json
      ---
      duration_ms: 0.09925
      ...
    # Subtest: Validating test/test2.json
    ok 43 - Validating test/test2.json
      ---
      duration_ms: 0.111541
      ...
    # Subtest: Validating test/test_audio.json
    ok 44 - Validating test/test_audio.json
      ---
      duration_ms: 0.7815
      ...
    # Subtest: Validating test/test_audio_instructions.json
    ok 45 - Validating test/test_audio_instructions.json
      ---
      duration_ms: 0.304208
      ...
    # Subtest: Validating test/test_beats.json
    ok 46 - Validating test/test_beats.json
      ---
      duration_ms: 0.94325
      ...
    # Subtest: Validating test/test_captions.json
    ok 47 - Validating test/test_captions.json
      ---
      duration_ms: 0.31825
      ...
    # Subtest: Validating test/test_elevenlabs_models.json
    ok 48 - Validating test/test_elevenlabs_models.json
      ---
      duration_ms: 0.662209
      ...
    # Subtest: Validating test/test_en.json
    ok 49 - Validating test/test_en.json
      ---
      duration_ms: 0.091625
      ...
    # Subtest: Validating test/test_hello.json
    ok 50 - Validating test/test_hello.json
      ---
      duration_ms: 0.135167
      ...
    # Subtest: Validating test/test_hello_google.json
    ok 51 - Validating test/test_hello_google.json
      ---
      duration_ms: 0.144666
      ...
    # Subtest: Validating test/test_html.json
    ok 52 - Validating test/test_html.json
      ---
      duration_ms: 0.101458
      ...
    # Subtest: Validating test/test_image_refs.json
    ok 53 - Validating test/test_image_refs.json
      ---
      duration_ms: 0.133166
      ...
    # Subtest: Validating test/test_images.json
    ok 54 - Validating test/test_images.json
      ---
      duration_ms: 0.111583
      ...
    # Subtest: Validating test/test_lang.json
    ok 55 - Validating test/test_lang.json
      ---
      duration_ms: 0.137125
      ...
    # Subtest: Validating test/test_layout.json
    ok 56 - Validating test/test_layout.json
      ---
      duration_ms: 0.568625
      ...
    # Subtest: Validating test/test_lipsync.json
    ok 57 - Validating test/test_lipsync.json
      ---
      duration_ms: 0.131333
      ...
    # Subtest: Validating test/test_loop.json
    ok 58 - Validating test/test_loop.json
      ---
      duration_ms: 0.210667
      ...
    # Subtest: Validating test/test_media.json
    ok 59 - Validating test/test_media.json
      ---
      duration_ms: 0.882083
      ...
    # Subtest: Validating test/test_mixed_providers.json
    ok 60 - Validating test/test_mixed_providers.json
      ---
      duration_ms: 0.3585
      ...
    # Subtest: Validating test/test_movie.json
    ok 61 - Validating test/test_movie.json
      ---
      duration_ms: 0.115375
      ...
    # Subtest: Validating test/test_no_audio.json
    ok 62 - Validating test/test_no_audio.json
      ---
      duration_ms: 0.968334
      ...
    # Subtest: Validating test/test_no_audio_with_credit.json
    ok 63 - Validating test/test_no_audio_with_credit.json
      ---
      duration_ms: 0.902416
      ...
    # Subtest: Validating test/test_order.json
    ok 64 - Validating test/test_order.json
      ---
      duration_ms: 0.178583
      ...
    # Subtest: Validating test/test_order_portrait.json
    ok 65 - Validating test/test_order_portrait.json
      ---
      duration_ms: 0.167667
      ...
    # Subtest: Validating test/test_replicate.json
    ok 66 - Validating test/test_replicate.json
      ---
      duration_ms: 0.270208
      ...
    # Subtest: Validating test/test_slideout_left_no_audio.json
    ok 67 - Validating test/test_slideout_left_no_audio.json
      ---
      duration_ms: 0.291666
      ...
    # Subtest: Validating test/test_sound_effect.json
    ok 68 - Validating test/test_sound_effect.json
      ---
      duration_ms: 0.097708
      ...
    # Subtest: Validating test/test_spillover.json
    ok 69 - Validating test/test_spillover.json
      ---
      duration_ms: 1.605708
      ...
    # Subtest: Validating test/test_transition.json
    ok 70 - Validating test/test_transition.json
      ---
      duration_ms: 0.305417
      ...
    # Subtest: Validating test/test_transition_no_audio.json
    ok 71 - Validating test/test_transition_no_audio.json
      ---
      duration_ms: 0.218125
      ...
    # Subtest: Validating test/test_video_speed.json
    ok 72 - Validating test/test_video_speed.json
      ---
      duration_ms: 0.405667
      ...
    # Subtest: Validating test/test_voice_over.json
    ok 73 - Validating test/test_voice_over.json
      ---
      duration_ms: 1.26825
      ...
    # Subtest: Validating test/test_voices.json
    ok 74 - Validating test/test_voices.json
      ---
      duration_ms: 0.274292
      ...
    1..74
ok 65 - JSON files in scripts directory should conform to mulmoScriptSchema
  ---
  duration_ms: 41.876833
  ...
# Subtest: JSON files in templates directory should conform to mulmoPromptTemplateSchema
    # Subtest: Validating template: akira_comic.json
    ok 1 - Validating template: akira_comic.json
      ---
      duration_ms: 0.104042
      ...
    # Subtest: Validating template: ani.json
    ok 2 - Validating template: ani.json
      ---
      duration_ms: 0.081375
      ...
    # Subtest: Validating template: ani_ja.json
    ok 3 - Validating template: ani_ja.json
      ---
      duration_ms: 0.0675
      ...
    # Subtest: Validating template: business.json
    ok 4 - Validating template: business.json
      ---
      duration_ms: 0.047791
      ...
    # Subtest: Validating template: characters.json
    ok 5 - Validating template: characters.json
      ---
      duration_ms: 0.056125
      ...
    # Subtest: Validating template: children_book.json
    ok 6 - Validating template: children_book.json
      ---
      duration_ms: 0.05525
      ...
    # Subtest: Validating template: coding.json
    ok 7 - Validating template: coding.json
      ---
      duration_ms: 0.04175
      ...
    # Subtest: Validating template: comic_strips.json
    ok 8 - Validating template: comic_strips.json
      ---
      duration_ms: 0.048708
      ...
    # Subtest: Validating template: drslump_comic.json
    ok 9 - Validating template: drslump_comic.json
      ---
      duration_ms: 0.08675
      ...
    # Subtest: Validating template: ghibli_comic.json
    ok 10 - Validating template: ghibli_comic.json
      ---
      duration_ms: 0.074
      ...
    # Subtest: Validating template: ghibli_image_only.json
    ok 11 - Validating template: ghibli_image_only.json
      ---
      duration_ms: 0.064625
      ...
    # Subtest: Validating template: ghibli_shorts.json
    ok 12 - Validating template: ghibli_shorts.json
      ---
      duration_ms: 0.144792
      ...
    # Subtest: Validating template: ghost_comic.json
    ok 13 - Validating template: ghost_comic.json
      ---
      duration_ms: 0.0815
      ...
    # Subtest: Validating template: html.json
    ok 14 - Validating template: html.json
      ---
      duration_ms: 0.046791
      ...
    # Subtest: Validating template: onepiece_comic.json
    ok 15 - Validating template: onepiece_comic.json
      ---
      duration_ms: 0.063625
      ...
    # Subtest: Validating template: podcast_standard.json
    ok 16 - Validating template: podcast_standard.json
      ---
      duration_ms: 0.05225
      ...
    # Subtest: Validating template: portrait_movie.json
    ok 17 - Validating template: portrait_movie.json
      ---
      duration_ms: 0.070917
      ...
    # Subtest: Validating template: realistic_movie.json
    ok 18 - Validating template: realistic_movie.json
      ---
      duration_ms: 0.054542
      ...
    # Subtest: Validating template: sensei_and_taro.json
    ok 19 - Validating template: sensei_and_taro.json
      ---
      duration_ms: 0.067292
      ...
    # Subtest: Validating template: shorts.json
    ok 20 - Validating template: shorts.json
      ---
      duration_ms: 0.06125
      ...
    # Subtest: Validating template: text_and_image.json
    ok 21 - Validating template: text_and_image.json
      ---
      duration_ms: 0.047333
      ...
    # Subtest: Validating template: text_only.json
    ok 22 - Validating template: text_only.json
      ---
      duration_ms: 0.051833
      ...
    # Subtest: Validating template: trailer.json
    ok 23 - Validating template: trailer.json
      ---
      duration_ms: 0.067959
      ...
    1..23
ok 66 - JSON files in templates directory should conform to mulmoPromptTemplateSchema
  ---
  duration_ms: 2.149375
  ...
# Subtest: test splitIntoSentences
ok 67 - test splitIntoSentences
  ---
  duration_ms: 0.642833
  ...
# Subtest: test recursiveSplit
ok 68 - test recursiveSplit
  ---
  duration_ms: 0.100792
  ...
# Subtest: test replacePairsJa
ok 69 - test replacePairsJa
  ---
  duration_ms: 0.114166
  ...
# Subtest: test getExtention
ok 70 - test getExtention
  ---
  duration_ms: 0.377959
  ...
# Subtest: test getExtention
ok 71 - test getExtention
  ---
  duration_ms: 0.050875
  ...
# Subtest: test getExtention
ok 72 - test getExtention
  ---
  duration_ms: 0.097917
  ...
# Subtest: test getExtention
ok 73 - test getExtention
  ---
  duration_ms: 0.040458
  ...
# Subtest: test getExtention
ok 74 - test getExtention
  ---
  duration_ms: 0.041416
  ...
# Subtest: test settings2GraphAIConfig
ok 75 - test settings2GraphAIConfig
  ---
  duration_ms: 0.686917
  ...
# Subtest: test settings2GraphAIConfig
ok 76 - test settings2GraphAIConfig
  ---
  duration_ms: 0.580375
  ...
# Subtest: test mulmoScriptSchema.parse in scripts/test dir 
ok 77 - test mulmoScriptSchema.parse in scripts/test dir 
  ---
  duration_ms: 29.428167
  ...
# Subtest: test presentation styles
ok 78 - test presentation styles
  ---
  duration_ms: 2.990834
  ...
# Subtest: validating versioning from 1.0
ok 79 - validating versioning from 1.0
  ---
  duration_ms: 1.897875
  ...
# Subtest: validating versioning from 1.1
ok 80 - validating versioning from 1.1
  ---
  duration_ms: 0.548042
  ...
1..80
# tests 177
# suites 0
# pass 173
# fail 0
# cancelled 0
# skipped 4
# todo 0
# duration_ms 7735.110583
Done in 8.12s.
